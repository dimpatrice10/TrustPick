<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # PRIORITE 1: Exclure les fichiers PWA (Service Worker, Manifest)
  RewriteRule ^pwa-manifest\.json$ - [L]
  RewriteRule ^pwa-worker\.js$ - [L]
  RewriteRule ^service-worker\.js$ - [L]
  RewriteRule ^manifest\.json$ - [L]
  RewriteRule ^offline\.html$ - [L]

  # PRIORITE 2: Exclure le dossier pwa/ dans public
  RewriteRule ^public/pwa/ - [L]

  # PRIORITE 3: Exclure les dossiers d'assets
  RewriteRule ^(assets|fonts|img|images|uploads|css|js)/ - [L]

  # Ne pas toucher aux fichiers et dossiers existants
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Rediriger toutes les autres requÃªtes vers index.php
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>